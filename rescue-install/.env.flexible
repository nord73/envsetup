# Enhanced configuration for flexible rescue installer

# --- Basic Configuration ---
DISK=/dev/sda
HOSTNAME=host1
TZ=Europe/Stockholm

# --- Distribution Configuration ---
# DISTRO: auto (detect), debian, ubuntu
DISTRO=auto
# CODENAME: auto (detect), bookworm, trixie (Debian), noble, oracular (Ubuntu)
CODENAME=auto

# --- Partitioning Mode ---
# PARTITION_MODE: full-zfs (traditional ZFS-on-root), fixed-root-zfs (fixed root + ZFS data)
PARTITION_MODE=full-zfs

# For fixed-root-zfs mode:
ROOT_SIZE=20G        # Size of root partition
ROOT_FS=ext4         # Filesystem: ext4, xfs, btrfs
BOOT_FS=             # Boot filesystem: auto (zfs for full-zfs, ext4 for fixed-root-zfs), zfs, ext4

# --- ZFS Configuration ---
POOL_R=rpool         # Root/data pool name
POOL_B=bpool         # Boot pool name
ARC_MAX_MB=2048      # ZFS ARC memory limit in MB
ENCRYPT=no           # ZFS encryption: yes/no

# --- Safety ---
FORCE=0              # Set to 1 to skip destructive confirmation prompts

# --- User Configuration ---
NEW_USER=ansible     # Optional: create additional user
NEW_USER_SUDO=1      # Grant sudo access to new user

# --- SSH Configuration ---
# Import SSH keys from GitHub/Launchpad
SSH_IMPORT_IDS="gh:YourGitHubUser"

# Or provide keys directly (space/newline separated)
SSH_AUTHORIZED_KEYS=""

# Or fetch from URLs (space separated)
SSH_AUTHORIZED_KEYS_URLS=""

# SSH daemon policy
PERMIT_ROOT_LOGIN=prohibit-password  # yes, no, prohibit-password
PASSWORD_AUTH=no                     # yes, no

# --- Examples ---
# Full ZFS on Debian Bookworm:
# DISTRO=debian
# CODENAME=bookworm
# PARTITION_MODE=full-zfs

# Fixed 30GB ext4 root + ZFS data on Ubuntu Noble:
# DISTRO=ubuntu
# CODENAME=noble
# PARTITION_MODE=fixed-root-zfs
# ROOT_SIZE=30G
# ROOT_FS=ext4

# Fixed 25GB XFS root + encrypted ZFS data:
# PARTITION_MODE=fixed-root-zfs
# ROOT_SIZE=25G
# ROOT_FS=xfs
# ENCRYPT=yes

# Fixed root with ext4 boot and ZFS data:
# PARTITION_MODE=fixed-root-zfs
# ROOT_SIZE=20G
# ROOT_FS=ext4
# BOOT_FS=ext4